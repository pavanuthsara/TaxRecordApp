<div class="container">
  <h2>{{ isEditMode ? 'Edit Tax Record' : 'Create Tax Record' }}</h2>
  <form [formGroup]="taxRecordForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="recordTitle">Record Title</label>
      <input id="recordTitle"
             formControlName="recordTitle"
             type="text"
             placeholder="Enter record title"
             [class.invalid]="f.recordTitle.touched && f.recordTitle.invalid" />
      <div *ngIf="f.recordTitle.touched && f.recordTitle.invalid" class="error">
        Record title is required.
      </div>
    </div>

    <div class="form-group">
      <label for="taxYear">Tax Year</label>
      <input id="taxYear"
             formControlName="taxYear"
             type="number"
             placeholder="Enter tax year (e.g., 2025)"
             [class.invalid]="f.taxYear.touched && f.taxYear.invalid" />
      <div *ngIf="f.taxYear.touched && f.taxYear.invalid" class="error">
        <div *ngIf="f.taxYear.errors?.['required']">Tax year is required.</div>
        <div *ngIf="f.taxYear.errors?.['min'] || f.taxYear.errors?.['max']">
          Tax year must be between 1900 and 9999.
        </div>
      </div>
    </div>

    <div class="form-group">
      <label for="incomeAmount">Income Amount</label>
      <input id="incomeAmount"
             formControlName="incomeAmount"
             type="number"
             placeholder="Enter income amount"
             [class.invalid]="f.incomeAmount.touched && f.incomeAmount.invalid" />
      <div *ngIf="f.incomeAmount.touched && f.incomeAmount.invalid" class="error">
        <div *ngIf="f.incomeAmount.errors?.['required']">Income amount is required.</div>
        <div *ngIf="f.incomeAmount.errors?.['min']">Income amount must be non-negative.</div>
      </div>
    </div>

    <div class="form-group">
      <label for="deductionsAmount">Deductions Amount</label>
      <input id="deductionsAmount"
             formControlName="deductionsAmount"
             type="number"
             placeholder="Enter deductions amount"
             [class.invalid]="f.deductionsAmount.touched && f.deductionsAmount.invalid" />
      <div *ngIf="f.deductionsAmount.touched && f.deductionsAmount.invalid" class="error">
        <div *ngIf="f.deductionsAmount.errors?.['required']">Deductions amount is required.</div>
        <div *ngIf="f.deductionsAmount.errors?.['min']">Deductions amount must be non-negative.</div>
      </div>
    </div>

    <div class="form-group">
      <label for="notes">Notes (Optional)</label>
      <textarea id="notes"
                formControlName="notes"
                placeholder="Enter any notes"></textarea>
    </div>

    <div class="form-actions">
      <button type="submit" [disabled]="taxRecordForm.invalid">
        {{ isEditMode ? 'Update' : 'Create' }} Record
      </button>
      <button type="button" (click)="router.navigate([''])">Cancel</button>
    </div>

    <div *ngIf="successMessage" class="success-message">
      {{ successMessage }}
    </div>
    <div *ngIf="errorMessage" class="error-message">
      {{ errorMessage }}
    </div>
  </form>
</div>
